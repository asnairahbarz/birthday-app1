<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday Dr. Nelia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Pacifico&family=Segoe+UI&display=swap" rel="stylesheet">
  <style>
    /* existing styles remain unchanged */
  </style>
</head>
<body>
  <div id="welcome-dialog">
    <div class="type-line" style="animation-delay:0s">🎂 Hello Dr. Nelia! A special surprise awaits you! 🎁</div>
    <div class="type-line" style="animation-delay:1s">Click anywhere on the screen to begin the celebration countdown!</div>
  </div>

  <div id="countdown">10</div>
  <div id="banner">🎉 Happy Birthday Dr. Nelia 🎉</div>
  <img id="center-image" src="celebrant-pic.png" alt="Celebrant">
  <div id="letter-panel">
    <p>Happy Birthday, Dr. Raganas!</p>
    <p>On your special day, I want to take a moment to sincerely thank you for your guidance, wisdom, and unwavering support. Working under your leadership has been an inspiring journey, and I deeply appreciate your dedication and the example you set for all of us.</p>
    <p>May this year bring you continued success, good health, and moments of joy both in your professional and personal life. You truly deserve all the best that life has to offer.</p>
    <p>Wishing you a wonderful birthday and many more to come!</p>
    <p>Respectfully,<br/>Asnairah</p>
    <button id="continueBtn">Continue</button>
  </div>

  <div class="container">
    <div class="slider-wrapper">
      <div class="slider">
        <img src="slide1.jpg" alt="Slide 1">
        <img src="slide2.jpg" alt="Slide 2">
        <img src="slide3.jpg" alt="Slide 3">
      </div>
    </div>
    <div class="card">
      <div class="photo-frame">
        <video src="celebrant.mp4" autoplay muted loop playsinline></video>
      </div>
      <h1>🎉 Happy Birthday 🎉</h1>
      <div class="name">Dr. Nelia S. Raganas</div>
      <button class="btn" onclick="showMessages()">See Messages</button>
      <div class="message-box" id="messageBox">Loading messages...</div>
    </div>
    <div class="slider-wrapper">
      <div class="slider">
        <img src="slide4.jpg" alt="Slide 4">
        <img src="slide5.jpg" alt="Slide 5">
        <img src="slide6.jpg" alt="Slide 6">
      </div>
    </div>
  </div>

  <audio id="music" loop>
    <source src="birthday.mp3" type="audio/mp3">
  </audio>

  <script>
    const countdownEl = document.getElementById('countdown');
    const banner = document.getElementById('banner');
    const image = document.getElementById('center-image');
    const letter = document.getElementById('letter-panel');
    const continueBtn = document.getElementById('continueBtn');

    let count = 10;
    const countdownSound = new Audio('countdown.mp3');
    const letterMusic = new Audio('letter.mp3');
    const birthdayMusic = new Audio('birthday.mp3');

    function startCountdown() {
      document.getElementById('welcome-dialog').style.display = 'none';
      countdownEl.style.display = 'block';
      countdownSound.play();

      let interval = setInterval(() => {
        count--;
        countdownEl.textContent = count;
        if (count <= 0) {
          clearInterval(interval);
          countdownEl.style.display = 'none';

          setTimeout(() => {
            banner.style.display = 'block';
            image.style.display = 'block';

            setTimeout(() => {
              banner.style.display = 'none';
              image.style.display = 'none';
              letter.style.display = 'block';
              letterMusic.play();
            }, 5000);
          }, 0);
        }
      }, 1000);
    }

    window.addEventListener('click', startCountdown, { once: true });

    continueBtn.addEventListener('click', () => {
      letterMusic.pause();
      letterMusic.currentTime = 0;
      letter.style.display = 'none';
      document.querySelector('.container').style.display = 'flex';
      birthdayMusic.play();
    });

    let messages = [];
    let currentIndex = 0;
    let interval;
    let messageBox = document.getElementById("messageBox");

    function showMessages() {
      document.querySelector(".btn").style.display = "none";
      fetch("/messages")
        .then(res => res.json())
        .then(data => {
          messages = data;
          if (messages.length === 0) {
            messageBox.style.display = "block";
            messageBox.innerText = "No messages yet.";
            return;
          }
          messageBox.style.display = "block";
          messageBox.innerText = messages[0];
          interval = setInterval(() => {
            currentIndex++;
            if (currentIndex < messages.length) {
              messageBox.innerText = messages[currentIndex];
            } else {
              clearInterval(interval);
              messageBox.innerText = "🎊 That's all the messages. Have a wonderful birthday!";
            }
          }, 3000);
        });
    }
  </script>
</body>
</html>
